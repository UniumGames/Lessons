### События. Рассылка и прослушивание

Довольно часто необходимо, чтобы одни объекты оповещали о своих действиях или о своем состоянии другие объекты. Например, граната может рассылать оповещение о своем взрыве и радиусе поражения. Реализовать это можно с помощью пользовательских событий. 

Система событий похожа на почту. В ней участвуют две стороны — отправитель события и получатель (слушатель). На одно событие может подписываться сколько угодно слушателей

Для примера отправитель будет рассылать событие, что он с чем-то столкнулся и отправлять в нем свои координаты

Отправителю необходимо выполнить два действия:

- Создать событие. Событие имеет тип `Action<[Type1, Type2 и тд]>`. В угловых скобках указываются типы данных, которые мы хотим отправить в событии
- Отправить это событие, передав дополнительные данные, если необходимо

```csharp
using System;
using UnityEngine;

public class Sender : MonoBehaviour {
	// создаем глобальное событие CollisionEvent
	public static Action<Vector3> CollisionEvent;

	void OnCollisionEnter(Collision collision) {
		// рассылаем событие CollisionEvent
		// и в нем передаем координаты отправителя
		CollisionEvent(transform.position);
	}
}
```

Слушатель также выполняет два действия:

- Создает функцию-обработчик события
- Подписывает ее на прослушивание события. Она вызовется, как только событие произойдет

```csharp
using UnityEngine;

public class Listener : MonoBehaviour {
	void Start () {
		// подписываемся на событие CollisionEvent
		// через класс, который распространяет событие
		Sender.CollisionEvent += React;
	}

	// создаем функцию-обработчик события
	void React(Vector3 collisionPosition) {
		print("Я знаю, что ты в беде! Иду на помощь!");
		print("Твои координаты: " + collisionPosition);
	}
}
```

